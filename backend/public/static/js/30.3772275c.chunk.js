(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[30],{229:function(e,t,n){"use strict";n.r(t);var r=n(8),a=n(2),i=n(5),c=n(0),l=n(3),o=n(147),s=n(53),j=n(176),u=n(194),b=n(181),d=n(195),h=n(145),O=n(159),p=n(38),g=n(1);var x;t.default=Object(O.a)((x=function(){var e=Object(l.h)().id,t=Object(l.g)(),n=Object(d.a)(),O=Object(c.useState)({}),p=Object(i.a)(O,2),x=p[0],v=p[1],f=Object(c.useState)({}),y=Object(i.a)(f,2),C=y[0],m=y[1],k=Object(c.useState)([]),L=Object(i.a)(k,2),S=L[0],w=L[1],G=Object(c.useState)(null),I=Object(i.a)(G,2),T=I[0],F=I[1];Object(c.useEffect)((function(){Object(h.g)(e).then((function(e){w(e.genres),v(e)}))}),[e,t]),x.genres=S;var q=function(e,t){v(Object(a.a)(Object(a.a)({},x),{},Object(r.a)({},e,t))),C[e]&&m(Object(a.a)(Object(a.a)({},C),{},Object(r.a)({},e,null)))},E=function(n){n.preventDefault();var r=A();x.genres=S,Object.keys(r).length>0?m(r):Object(h.e)(e,x,T).then((function(e){t("/details/".concat(x._id))}))},A=function(){var e=x.title,t=x.author,n=x.description,r=(x.series,x.seriesRow,x.year),a={};return void 0!==e&&0!==e.length||(a.title="Title is required!"),void 0!==t&&0!==t.length||(a.author="Author is required!"),void 0!==n&&0!==n.length||(a.description="Description is required!"),void 0!==r?r<1950&&(a.year="Minimal value is 1950!"):a.year="Year is required!",0===S.length&&(a.genre="There must be at least one genre!"),a};return Object(g.jsx)(b.a.Provider,{value:{setTags:w},children:Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{className:"my-4 font-weight-bold .display-4",children:"Edit Book"}),Object(g.jsxs)(o.a,{style:{width:"300px"},onSubmit:E,children:[Object(g.jsxs)(o.a.Group,{children:[Object(g.jsx)(o.a.Label,{children:"Title"}),Object(g.jsx)(o.a.Control,{onChange:function(e){return q("title",e.target.value)},placeholder:"Title",isInvalid:!!C.title,value:x.title}),Object(g.jsx)(o.a.Control.Feedback,{type:"invalid",children:C.title})]}),Object(g.jsxs)(o.a.Group,{children:[Object(g.jsx)(o.a.Label,{children:"Author"}),Object(g.jsx)(o.a.Control,{onChange:function(e){return q("author",e.target.value)},placeholder:"Author",isInvalid:!!C.author,value:x.author}),Object(g.jsx)(o.a.Control.Feedback,{type:"invalid",children:C.author})]}),Object(g.jsxs)(o.a.Group,{children:[Object(g.jsx)(o.a.Label,{children:"Image (optional, original image won't be replaced)"}),Object(g.jsx)(o.a.Control,{type:"file",onChange:function(e){return F(e.target.files[0])}})]}),Object(g.jsxs)(o.a.Group,{children:[Object(g.jsx)(o.a.Label,{children:"Description"}),Object(g.jsx)(o.a.Control,{as:"textarea",onChange:function(e){return q("description",e.target.value)},isInvalid:!!C.description,value:x.description}),Object(g.jsx)(o.a.Control.Feedback,{type:"invalid",children:C.description})]})]}),Object(g.jsxs)("div",{style:{width:"300px"},children:[Object(g.jsx)(o.a.Label,{children:"Genres"}),n?null:Object(g.jsx)(j.a,{tags:S,onChange:function(e){return w(e)},placeholder:"Enter genre and press enter"}),n?Object(g.jsx)(u.a,{tagsInput:S,onChange:w}):null,Object(g.jsx)(o.a.Control.Feedback,{type:"invalid",children:C.genres})]}),Object(g.jsxs)(o.a,{style:{width:"300px"},onSubmit:E,children:[Object(g.jsxs)(o.a.Group,{children:[Object(g.jsx)(o.a.Label,{children:"Series (optional)"}),Object(g.jsx)(o.a.Control,{onChange:function(e){return q("series",e.target.value)},placeholder:"Series",value:x.series})]}),Object(g.jsxs)(o.a.Group,{children:[Object(g.jsx)(o.a.Label,{children:"Series Number (optional)"}),Object(g.jsx)(o.a.Control,{onChange:function(e){return q("seriesRow",e.target.value)},placeholder:"Series Number",type:"number",value:x.seriesRow})]}),Object(g.jsxs)(o.a.Group,{children:[Object(g.jsx)(o.a.Label,{children:"Year of Publishing"}),Object(g.jsx)(o.a.Control,{onChange:function(e){return q("year",e.target.value)},placeholder:"Year of Publishing",isInvalid:!!C.year,type:"number",min:"1950",value:x.year}),Object(g.jsx)(o.a.Control.Feedback,{type:"invalid",children:C.year})]}),Object(g.jsxs)(o.a.Group,{children:[Object(g.jsx)(o.a.Label,{children:"Link to buy from (optional)"}),Object(g.jsx)(o.a.Control,{onChange:function(e){return q("buyLink",e.target.value)},placeholder:"Link to buy from",value:x.buyLink})]}),Object(g.jsx)(s.a,{type:"submit",style:{marginTop:"5%"},children:"Edit Book"})]})]})})},function(e){return Object(p.c)((function(e){return e.user})).username===localStorage.getItem("username")?Object(g.jsx)(x,Object(a.a)({},e)):Object(g.jsx)(l.a,{to:"/login"})}))}}]);
//# sourceMappingURL=30.3772275c.chunk.js.map