(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[26],{169:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return j}));var r=n(6),a=n.n(r),c=n(15),s=n(13),u=n(96);function i(e){return o.apply(this,arguments)}function o(){return(o=Object(s.a)(a.a.mark((function e(t){var n,r,s,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.f)();case 2:if(n=e.sent,r=[],null!==n){s=Object(c.a)(n);try{for(s.s();!(i=s.n()).done;)(o=i.value).title.toLowerCase().includes(t.toLowerCase())&&r.push(o)}catch(a){s.e(a)}finally{s.f()}r.sort((function(e,t){return e.title.localeCompare(t.title)}))}return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return l.apply(this,arguments)}function l(){return(l=Object(s.a)(a.a.mark((function e(t){var n,r,s,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.f)();case 2:if(n=e.sent,r=[],null!==n){s=Object(c.a)(n);try{for(s.s();!(i=s.n()).done;)(o=i.value).author.toLowerCase().includes(t.toLowerCase())&&r.push(o)}catch(a){s.e(a)}finally{s.f()}r.sort((function(e,t){return e.title.localeCompare(t.title)}))}return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return b.apply(this,arguments)}function b(){return(b=Object(s.a)(a.a.mark((function e(t){var n,r,s,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.f)();case 2:if(n=e.sent,r=[],null!==n){s=Object(c.a)(n);try{for(s.s();!(i=s.n()).done;)o=i.value,o.genres.map((function(e){return e.toLowerCase()})).filter((function(e){return e.includes(t.toLowerCase())})).length>0&&r.push(o)}catch(a){s.e(a)}finally{s.f()}r.sort((function(e,t){return e.title.localeCompare(t.title)}))}return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return h.apply(this,arguments)}function h(){return(h=Object(s.a)(a.a.mark((function e(t){var n,r,s,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.f)();case 2:if(n=e.sent,r=[],null!==n){s=Object(c.a)(n);try{for(s.s();!(i=s.n()).done;)(o=i.value).series&&o.series.toLowerCase().includes(t.toLowerCase())&&r.push(o)}catch(a){s.e(a)}finally{s.f()}r.sort((function(e,t){return e.seriesRow-t.seriesRow}))}return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},179:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),a=n(53),c=n(9),s=n(1),u=function(e){return function(t){return null!==Object(a.c)((function(e){return e.user})).token?Object(s.jsx)(e,Object(r.a)({},t)):Object(s.jsx)(c.a,{to:"/login"})}}},181:function(e,t,n){"use strict";n.d(t,"d",(function(){return j})),n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return x})),n.d(t,"g",(function(){return k})),n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return w})),n.d(t,"f",(function(){return C}));var r=n(6),a=n.n(r),c=n(15),s=n(13),u=n(7),i=n(54),o=n(96),f=n(169),l=n(98),p=Object(u.c)(i.a),b=Object(u.g)(p);function j(){return h.apply(this,arguments)}function h(){return(h=Object(s.a)(a.a.mark((function e(){var t,n,r,s,i,f,l,p,j,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)(Object(u.a)(b,"/users"));case 2:for(i in t=e.sent,n=t.val(),s=[],n)n[i]._id===localStorage.getItem("token")&&(f=n[i],r=i,f.favourites&&(s=f.favourites));l=Object(c.a)(s),e.prev=7,l.s();case 9:if((p=l.n()).done){e.next=21;break}return j=p.value,e.next=13,Object(o.g)(j);case 13:return void 0===e.sent&&s.splice(s.indexOf(j),1),(h=n[r]).favourites=s,e.next=19,Object(u.i)(Object(u.a)(b,"/users/"+r),h);case 19:e.next=9;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(7),l.e(e.t0);case 26:return e.prev=26,l.f(),e.finish(26);case 29:return e.abrupt("return",s);case 30:case"end":return e.stop()}}),e,null,[[7,23,26,29]])})))).apply(this,arguments)}function O(){return d.apply(this,arguments)}function d(){return(d=Object(s.a)(a.a.mark((function e(){var t,n,r,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.f)();case 2:if(t=e.sent,n=[],null!==t){r=Object(c.a)(t);try{for(r.s();!(s=r.n()).done;)(u=s.value).creator===localStorage.getItem("username")&&n.push(u)}catch(a){r.e(a)}finally{r.f()}}return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return v.apply(this,arguments)}function v(){return(v=Object(s.a)(a.a.mark((function e(){var t,n,r,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.f)();case 2:if(t=e.sent,n=[],null!==t){r=Object(c.a)(t);try{for(r.s();!(s=r.n()).done;)void 0!==(u=s.value).likes&&u.likes.includes(localStorage.getItem("username"))&&n.push(u)}catch(a){r.e(a)}finally{r.f()}}return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return g.apply(this,arguments)}function g(){return(g=Object(s.a)(a.a.mark((function e(t){var n,r,c,s,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.authors,r=t.genres,e.next=3,Object(u.b)(Object(u.a)(b,"/users"));case 3:c=e.sent,s=c.val(),e.t0=a.a.keys(s);case 6:if((e.t1=e.t0()).done){e.next=15;break}if(i=e.t1.value,s[i]._id!==localStorage.getItem("token")){e.next=13;break}return(o=s[i]).preferences={authors:n,genres:r},e.next=13,Object(u.i)(Object(u.a)(b,"/users/"+i),o);case 13:e.next=6;break;case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return y.apply(this,arguments)}function y(){return(y=Object(s.a)(a.a.mark((function e(){var t,n,r,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)(Object(u.a)(b,"/users"));case 2:for(c in t=e.sent,n=t.val(),r={},n)n[c]._id===localStorage.getItem("token")&&(s=n[c],r=s.preferences?s.preferences:{authors:[],genres:[]});return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return S.apply(this,arguments)}function S(){return(S=Object(s.a)(a.a.mark((function e(){var t,n,r,s,u,i,l,p,b,j,h,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:return t=e.sent,n=t.genres,r=t.authors,e.next=7,Object(o.f)();case 7:if(s=e.sent,u=[],null===s){e.next=50;break}if(!(n&&n.length>0)){e.next=30;break}i=Object(c.a)(n),e.prev=12,i.s();case 14:if((l=i.n()).done){e.next=22;break}return p=l.value,e.next=18,Object(f.b)(p);case 18:e.sent.map((function(e){return u.push(e),e}));case 20:e.next=14;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(12),i.e(e.t0);case 27:return e.prev=27,i.f(),e.finish(27);case 30:if(!(r&&r.length>0)){e.next=50;break}b=Object(c.a)(r),e.prev=32,b.s();case 34:if((j=b.n()).done){e.next=42;break}return h=j.value,e.next=38,Object(f.a)(h);case 38:e.sent.map((function(e){return u.push(e),e}));case 40:e.next=34;break;case 42:e.next=47;break;case 44:e.prev=44,e.t1=e.catch(32),b.e(e.t1);case 47:return e.prev=47,b.f(),e.finish(47);case 50:return O=new Set(u),e.abrupt("return",Array.from(O));case 52:case"end":return e.stop()}}),e,null,[[12,24,27,30],[32,44,47,50]])})))).apply(this,arguments)}function C(){return L.apply(this,arguments)}function L(){return(L=Object(s.a)(a.a.mark((function e(){var t,n,r,s,i,f,p,j,h,O,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.f)();case 2:return t=e.sent,e.next=5,Object(u.b)(b,"/users");case 5:return n=e.sent,r=n.val(),e.next=9,Object(l.c)();case 9:s=e.sent,i=Object(c.a)(t),e.prev=11,i.s();case 13:if((f=i.n()).done){e.next=26;break}if((p=f.value).creator!==localStorage.getItem("username")){e.next=18;break}return e.next=18,Object(o.n)(p._id);case 18:if(!p.likes||!p.likes.includes(localStorage.getItem("username"))){e.next=22;break}return p.likes.splice(p.likes.indexOf(localStorage.getItem("username")),1),e.next=22,Object(o.e)(p._id,p);case 22:return e.next=24,Object(l.e)(p._id);case 24:e.next=13;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(11),i.e(e.t0);case 31:return e.prev=31,i.f(),e.finish(31);case 34:j=Object(c.a)(s),e.prev=35,j.s();case 37:if((h=j.n()).done){e.next=44;break}if((O=h.value).creator!==localStorage.getItem("username")){e.next=42;break}return e.next=42,Object(l.f)(O._id);case 42:e.next=37;break;case 44:e.next=49;break;case 46:e.prev=46,e.t1=e.catch(35),j.e(e.t1);case 49:return e.prev=49,j.f(),e.finish(49);case 52:e.t2=a.a.keys(r);case 53:if((e.t3=e.t2()).done){e.next=61;break}if(d=e.t3.value,r[d]._id!==localStorage.getItem("token")){e.next=59;break}return e.next=59,Object(u.h)(Object(u.a)(b,"/users/"+d));case 59:e.next=53;break;case 61:case"end":return e.stop()}}),e,null,[[11,28,31,34],[35,46,49,52]])})))).apply(this,arguments)}},222:function(e,t,n){"use strict";n.r(t);var r=n(10),a=n(0),c=n(9),s=n(168),u=n(52),i=n(184),o=n(181),f=n(179),l=n(1);t.default=Object(f.a)((function(){var e=Object(c.g)(),t=Object(a.useState)([]),n=Object(r.a)(t,2),f=n[0],p=n[1],b=Object(a.useState)([]),j=Object(r.a)(b,2),h=j[0],O=j[1],d=Object(a.useState)(!0),x=Object(r.a)(d,2),v=x[0],k=x[1];return Object(a.useEffect)((function(){return v&&Object(o.e)().then((function(e){p(e.genres||[]),O(e.authors||[])})),function(){k(!1)}}),[v]),Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{className:"my-4 font-weight-bold .display-4",children:"Set Preferences"}),Object(l.jsxs)(s.a,{style:{width:"300px",marginLeft:"20%"},onSubmit:function(t){t.preventDefault(),Object(o.g)({authors:h,genres:f}).then((function(){e("/profile/recommended")}))},children:[Object(l.jsxs)(s.a.Group,{children:[Object(l.jsx)(s.a.Label,{children:"Genres"}),Object(l.jsx)(i.a,{tags:f,onChange:p,placeHolder:"Enter genre and press enter"})]}),Object(l.jsxs)(s.a.Group,{children:[Object(l.jsx)(s.a.Label,{children:"Authors"}),Object(l.jsx)(i.a,{tags:h,onChange:O,placeHolder:"Enter author and press enter"})]}),Object(l.jsx)(u.a,{type:"submit",style:{marginTop:"5%"},children:"Set Preferences"})]})]})}))}}]);
//# sourceMappingURL=26.08859445.chunk.js.map