(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[16],{162:function(e,t,n){},163:function(e,t,n){e.exports={card:"BookItem_card__3WB3x"}},164:function(e,t,n){e.exports={"books-row":"BooksList_books-row__2-grT"}},165:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(10),a=n(0),c=n(160),s=n.n(c);function u(e){var t=Object(a.useState)(1),n=Object(r.a)(t,2),c=n[0],u=n[1],o=function(){var t=function(e,t,n){var r=(t-1)*n;return s()(e).slice(r).take(n).value()}(e,c,9);return{totalCount:e.length,data:t}}(),i=o.totalCount;return{data:o.data,totalCount:i,pageSize:9,currentPage:c,handlePageChange:function(e){u(e)}}}n(162);var o=n(1),i=function(e){var t=e.itemsCount,n=e.pageSize,r=e.currentPage,a=e.onPageChange,c=Math.ceil(t/n);if(1===c)return null;var u=s.a.range(1,c+1);return Object(o.jsx)("div",{className:"pagination",style:{marginTop:"5%"},children:u.map((function(e){return Object(o.jsx)("div",{href:null,onClick:function(){return a(e)},className:e===r?"active":"page-item",children:e},e)}))})},l=n(170),f=n(97),b=n(180),p=n(18),j=n(69),d=n(163),h=n.n(d);function x(e){var t=e.book,n=Object(a.useState)(""),c=Object(r.a)(n,2),s=c[0],u=c[1],i=Object(a.useState)(!0),d=Object(r.a)(i,2),x=d[0],O=d[1],k=Object(a.useState)(""),v=Object(r.a)(k,2),g=v[0],m=v[1],y=b(t.createdOn).format("DD/MM/YYYY h:mm A");return Object(a.useEffect)((function(){return x&&(Object(j.c)(t._id).then((function(e){u(e)})),Object(j.b)(t.creator).then((function(e){m(e)}))),""===g&&m("https://media.istockphoto.com/illustrations/blank-man-profile-head-icon-placeholder-illustration-id1298261537?k=20&m=1298261537&s=612x612&w=0&h=8plXnK6Ur3LGqG9s-Xt2ZZfKk6bI0IbzDZrNH9tr9Ok="),function(){O(!1)}}),[x,t._id,t.creator,g]),t.description.length>255&&(t.description=t.description.slice(0,256),t.description+="..."),Object(o.jsxs)(l.a,{className:h.a.card,children:[Object(o.jsx)(f.a,{src:g,alt:"No avatar",className:"avatar",style:{marginLeft:"36%",marginTop:"5%"}}),Object(o.jsxs)(l.a.Body,{children:[Object(o.jsx)(l.a.Img,{src:s,style:{width:"60%",height:"40%"},alt:"No image"}),Object(o.jsx)(l.a.Title,{style:{marginTop:"5%",textDecoration:"underline",fontSize:"20px"},children:Object(o.jsx)(p.b,{to:"/details/".concat(t._id),style:{color:"grey"},children:t.title})}),Object(o.jsxs)(l.a.Text,{style:{fontSize:"12px"},children:["Book added on ",y," ",Object(o.jsxs)(p.b,{to:"/user/".concat(t.creator),style:{fontSize:"12px",color:"black"},children:[" by ",t.creator]})]}),t.likes?Object(o.jsxs)(l.a.Text,{style:{fontSize:"12px"},children:[t.likes.length," like",t.likes.length>1?"s":""]}):Object(o.jsx)(l.a.Text,{style:{fontSize:"12px"},children:"0 likes"}),Object(o.jsx)(l.a.Text,{style:{wordBreak:"break-all",fontSize:"15px"},children:t.description}),Object(o.jsx)(l.a.Link,{as:p.b,to:"/details/".concat(t._id),style:{color:"grey",textDecoration:"none",fontSize:"15px"},children:"See more..."})]})]})}var O=n(164),k=n.n(O);function v(e){var t=e.books,n=u(t||[]),r=n.data,a=n.totalCount,c=n.pageSize,s=n.currentPage,l=n.handlePageChange,f=function(e,t){for(var n=[],r=0,a=e.length;r<a;)n.push(e.slice(r,r+=t));return n}(r,3);return Object(o.jsxs)(o.Fragment,{children:[f.map((function(e){return Object(o.jsx)("div",{className:k.a["books-row"],"data-testid":"booksrow",children:e.map((function(e){return Object(o.jsx)(x,{book:e},e._id)}))},e[0]._id)})),Object(o.jsx)(i,{itemsCount:a,pageSize:c,currentPage:s,onPageChange:l})]})}},169:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return j}));var r=n(6),a=n.n(r),c=n(15),s=n(13),u=n(96);function o(e){return i.apply(this,arguments)}function i(){return(i=Object(s.a)(a.a.mark((function e(t){var n,r,s,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.f)();case 2:if(n=e.sent,r=[],null!==n){s=Object(c.a)(n);try{for(s.s();!(o=s.n()).done;)(i=o.value).title.toLowerCase().includes(t.toLowerCase())&&r.push(i)}catch(a){s.e(a)}finally{s.f()}r.sort((function(e,t){return e.title.localeCompare(t.title)}))}return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return f.apply(this,arguments)}function f(){return(f=Object(s.a)(a.a.mark((function e(t){var n,r,s,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.f)();case 2:if(n=e.sent,r=[],null!==n){s=Object(c.a)(n);try{for(s.s();!(o=s.n()).done;)(i=o.value).author.toLowerCase().includes(t.toLowerCase())&&r.push(i)}catch(a){s.e(a)}finally{s.f()}r.sort((function(e,t){return e.title.localeCompare(t.title)}))}return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return p.apply(this,arguments)}function p(){return(p=Object(s.a)(a.a.mark((function e(t){var n,r,s,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.f)();case 2:if(n=e.sent,r=[],null!==n){s=Object(c.a)(n);try{for(s.s();!(o=s.n()).done;)i=o.value,i.genres.map((function(e){return e.toLowerCase()})).filter((function(e){return e.includes(t.toLowerCase())})).length>0&&r.push(i)}catch(a){s.e(a)}finally{s.f()}r.sort((function(e,t){return e.title.localeCompare(t.title)}))}return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return d.apply(this,arguments)}function d(){return(d=Object(s.a)(a.a.mark((function e(t){var n,r,s,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.f)();case 2:if(n=e.sent,r=[],null!==n){s=Object(c.a)(n);try{for(s.s();!(o=s.n()).done;)(i=o.value).series&&i.series.toLowerCase().includes(t.toLowerCase())&&r.push(i)}catch(a){s.e(a)}finally{s.f()}r.sort((function(e,t){return e.seriesRow-t.seriesRow}))}return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},179:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),a=n(53),c=n(9),s=n(1),u=function(e){return function(t){return null!==Object(a.c)((function(e){return e.user})).token?Object(s.jsx)(e,Object(r.a)({},t)):Object(s.jsx)(c.a,{to:"/login"})}}},181:function(e,t,n){"use strict";n.d(t,"d",(function(){return j})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return O})),n.d(t,"g",(function(){return v})),n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return w})),n.d(t,"f",(function(){return C}));var r=n(6),a=n.n(r),c=n(15),s=n(13),u=n(7),o=n(54),i=n(96),l=n(169),f=n(98),b=Object(u.c)(o.a),p=Object(u.g)(b);function j(){return d.apply(this,arguments)}function d(){return(d=Object(s.a)(a.a.mark((function e(){var t,n,r,s,o,l,f,b,j,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)(Object(u.a)(p,"/users"));case 2:for(o in t=e.sent,n=t.val(),s=[],n)n[o]._id===localStorage.getItem("token")&&(l=n[o],r=o,l.favourites&&(s=l.favourites));f=Object(c.a)(s),e.prev=7,f.s();case 9:if((b=f.n()).done){e.next=21;break}return j=b.value,e.next=13,Object(i.g)(j);case 13:return void 0===e.sent&&s.splice(s.indexOf(j),1),(d=n[r]).favourites=s,e.next=19,Object(u.i)(Object(u.a)(p,"/users/"+r),d);case 19:e.next=9;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(7),f.e(e.t0);case 26:return e.prev=26,f.f(),e.finish(26);case 29:return e.abrupt("return",s);case 30:case"end":return e.stop()}}),e,null,[[7,23,26,29]])})))).apply(this,arguments)}function h(){return x.apply(this,arguments)}function x(){return(x=Object(s.a)(a.a.mark((function e(){var t,n,r,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.f)();case 2:if(t=e.sent,n=[],null!==t){r=Object(c.a)(t);try{for(r.s();!(s=r.n()).done;)(u=s.value).creator===localStorage.getItem("username")&&n.push(u)}catch(a){r.e(a)}finally{r.f()}}return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return k.apply(this,arguments)}function k(){return(k=Object(s.a)(a.a.mark((function e(){var t,n,r,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.f)();case 2:if(t=e.sent,n=[],null!==t){r=Object(c.a)(t);try{for(r.s();!(s=r.n()).done;)void 0!==(u=s.value).likes&&u.likes.includes(localStorage.getItem("username"))&&n.push(u)}catch(a){r.e(a)}finally{r.f()}}return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return(g=Object(s.a)(a.a.mark((function e(t){var n,r,c,s,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.authors,r=t.genres,e.next=3,Object(u.b)(Object(u.a)(p,"/users"));case 3:c=e.sent,s=c.val(),e.t0=a.a.keys(s);case 6:if((e.t1=e.t0()).done){e.next=15;break}if(o=e.t1.value,s[o]._id!==localStorage.getItem("token")){e.next=13;break}return(i=s[o]).preferences={authors:n,genres:r},e.next=13,Object(u.i)(Object(u.a)(p,"/users/"+o),i);case 13:e.next=6;break;case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return y.apply(this,arguments)}function y(){return(y=Object(s.a)(a.a.mark((function e(){var t,n,r,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)(Object(u.a)(p,"/users"));case 2:for(c in t=e.sent,n=t.val(),r={},n)n[c]._id===localStorage.getItem("token")&&(s=n[c],r=s.preferences?s.preferences:{authors:[],genres:[]});return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return S.apply(this,arguments)}function S(){return(S=Object(s.a)(a.a.mark((function e(){var t,n,r,s,u,o,f,b,p,j,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:return t=e.sent,n=t.genres,r=t.authors,e.next=7,Object(i.f)();case 7:if(s=e.sent,u=[],null===s){e.next=50;break}if(!(n&&n.length>0)){e.next=30;break}o=Object(c.a)(n),e.prev=12,o.s();case 14:if((f=o.n()).done){e.next=22;break}return b=f.value,e.next=18,Object(l.b)(b);case 18:e.sent.map((function(e){return u.push(e),e}));case 20:e.next=14;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(12),o.e(e.t0);case 27:return e.prev=27,o.f(),e.finish(27);case 30:if(!(r&&r.length>0)){e.next=50;break}p=Object(c.a)(r),e.prev=32,p.s();case 34:if((j=p.n()).done){e.next=42;break}return d=j.value,e.next=38,Object(l.a)(d);case 38:e.sent.map((function(e){return u.push(e),e}));case 40:e.next=34;break;case 42:e.next=47;break;case 44:e.prev=44,e.t1=e.catch(32),p.e(e.t1);case 47:return e.prev=47,p.f(),e.finish(47);case 50:return h=new Set(u),e.abrupt("return",Array.from(h));case 52:case"end":return e.stop()}}),e,null,[[12,24,27,30],[32,44,47,50]])})))).apply(this,arguments)}function C(){return _.apply(this,arguments)}function _(){return(_=Object(s.a)(a.a.mark((function e(){var t,n,r,s,o,l,b,j,d,h,x;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.f)();case 2:return t=e.sent,e.next=5,Object(u.b)(p,"/users");case 5:return n=e.sent,r=n.val(),e.next=9,Object(f.c)();case 9:s=e.sent,o=Object(c.a)(t),e.prev=11,o.s();case 13:if((l=o.n()).done){e.next=26;break}if((b=l.value).creator!==localStorage.getItem("username")){e.next=18;break}return e.next=18,Object(i.n)(b._id);case 18:if(!b.likes||!b.likes.includes(localStorage.getItem("username"))){e.next=22;break}return b.likes.splice(b.likes.indexOf(localStorage.getItem("username")),1),e.next=22,Object(i.e)(b._id,b);case 22:return e.next=24,Object(f.e)(b._id);case 24:e.next=13;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(11),o.e(e.t0);case 31:return e.prev=31,o.f(),e.finish(31);case 34:j=Object(c.a)(s),e.prev=35,j.s();case 37:if((d=j.n()).done){e.next=44;break}if((h=d.value).creator!==localStorage.getItem("username")){e.next=42;break}return e.next=42,Object(f.f)(h._id);case 42:e.next=37;break;case 44:e.next=49;break;case 46:e.prev=46,e.t1=e.catch(35),j.e(e.t1);case 49:return e.prev=49,j.f(),e.finish(49);case 52:e.t2=a.a.keys(r);case 53:if((e.t3=e.t2()).done){e.next=61;break}if(x=e.t3.value,r[x]._id!==localStorage.getItem("token")){e.next=59;break}return e.next=59,Object(u.h)(Object(u.a)(p,"/users/"+x));case 59:e.next=53;break;case 61:case"end":return e.stop()}}),e,null,[[11,28,31,34],[35,46,49,52]])})))).apply(this,arguments)}},224:function(e,t,n){"use strict";n.r(t);var r=n(10),a=n(0),c=n(165),s=n(181),u=n(179),o=n(1);t.default=Object(u.a)((function(){var e=Object(a.useState)(!0),t=Object(r.a)(e,2),n=t[0],u=t[1],i=Object(a.useState)([]),l=Object(r.a)(i,2),f=l[0],b=l[1];return Object(a.useEffect)((function(){return n&&Object(s.c)().then((function(e){b(e||[])})),function(){u(!1)}}),[n,f]),n?Object(o.jsx)("p",{children:"Loading the recommended books for you..."}):f&&f.length>0?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h1",{children:"Recommended books"}),Object(o.jsx)(c.a,{books:f})]}):Object(o.jsx)("p",{children:"No books"})}))}}]);
//# sourceMappingURL=16.9b017816.chunk.js.map