(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[23],{179:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),a=n(53),o=n(9),i=n(1),c=function(e){return function(t){return null!==Object(a.c)((function(e){return e.user})).token?Object(i.jsx)(e,Object(r.a)({},t)):Object(i.jsx)(o.a,{to:"/login"})}}},182:function(e,t,n){"use strict";function r(e){return 0===e.length||void 0===e}function a(e,t){return e===t}function o(e,t){return e.length>=t}function i(e){return/^(https:|http:|www\.)\S*/gm.test(e)}function c(e){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(e)}n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return c}))},184:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o="react-tag-input",i="react-tag-input__input",c="react-tag-input__tag",s="react-tag-input__tag__content",u="react-tag-input__tag__remove",l="react-tag-input__tag__remove-readonly";var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function p(e){return function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return d[e]}))}(function(e){return e.replace(/(\r\n|\n|\r)/gm,"")}(e))}var j=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.focused=!1,t.removed=!1,t.preFocusedValue="",t.onPaste=function(e){e.preventDefault();var t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,p(t))},t.onFocus=function(){t.preFocusedValue=t.getValue(),t.focused=!0},t.onBlur=function(){t.focused=!1;var e=t.props.innerEditableRef.current,n=t.props,r=n.validator,a=n.change;if(!t.removed&&e){if(""===e.innerText)return void t.props.remove();if(r)if(!r(t.getValue()))return void(e.innerText=t.preFocusedValue);a(e.innerText)}},t.onKeyDown=function(e){if(13===e.keyCode)return e.preventDefault(),void t.focusInputRef();var n=t.props.removeOnBackspace,r=t.getValue();return n&&8===e.keyCode&&""===r?(t.removed=!0,t.props.remove(),void t.focusInputRef()):void 0},t.getValue=function(){var e=t.getRef();return e?e.innerText:""},t.getRef=function(){return t.props.innerEditableRef.current},t.focusInputRef=function(){var e=t.props.inputRef;e&&e.current&&e.current.focus()},t}return j(t,e),t.prototype.componentDidMount=function(){this.preFocusedValue=this.getValue()},t.prototype.render=function(){var e=this.props,t=e.value,n=e.className,r=e.innerEditableRef;return a.a.createElement("div",{ref:r,className:n,contentEditable:!0,onPaste:this.onPaste,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,dangerouslySetInnerHTML:{__html:p(t)}})},t}(a.a.Component),h=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.innerEditableRef=a.a.createRef(),t.remove=function(){return t.props.remove(t.props.index)},t}return h(t,e),t.prototype.render=function(){var e=this.props,t=e.value,n=e.index,r=e.editable,o=e.inputRef,i=e.validator,d=e.update,p=e.readOnly,j=e.removeOnBackspace,h=p?u+" "+l:u;return a.a.createElement("div",{className:c},!r&&a.a.createElement("div",{className:s},t),r&&a.a.createElement(b,{value:t,inputRef:o,innerEditableRef:this.innerEditableRef,className:s,change:function(e){return d(n,e)},remove:this.remove,validator:i,removeOnBackspace:j}),a.a.createElement("div",{className:h,onClick:this.remove}))},t}(a.a.Component),v=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={input:""},t.inputRef=a.a.createRef(),t.onInputChange=function(e){t.setState({input:e.target.value})},t.onInputKeyDown=function(e){var n=t.state.input,r=t.props,a=r.validator,o=r.removeOnBackspace;if(13===e.keyCode){if(e.preventDefault(),""===n)return;if(!(void 0===a||a(n)))return;t.addTag(n)}else if(o&&(8===e.keyCode||46===e.keyCode)){if(""!==n)return;t.removeTag(t.props.tags.length-1)}},t.addTag=function(e){var n=t.props.tags.slice();n.push(e),t.props.onChange(n),t.setState({input:""})},t.removeTag=function(e){var n=t.props.tags.slice();n.splice(e,1),t.props.onChange(n)},t.updateTag=function(e,n){var r=t.props.tags.slice();r[e]=n,t.props.onChange(r)},t}return v(t,e),t.prototype.render=function(){var e=this,t=this.state.input,n=this.props,r=n.tags,c=n.placeholder,s=n.maxTags,u=n.editable,l=n.readOnly,d=n.validator,p=n.removeOnBackspace,j=void 0!==s&&r.length>=s,b=!l&&(u||!1),h=!l&&!j;return a.a.createElement("div",{className:o},r.map((function(t,n){return a.a.createElement(f,{key:n,value:t,index:n,editable:b,readOnly:l||!1,inputRef:e.inputRef,update:e.updateTag,remove:e.removeTag,validator:d,removeOnBackspace:p})})),h&&a.a.createElement("input",{ref:this.inputRef,value:t,className:i,placeholder:c||"Type and press enter",onChange:this.onInputChange,onKeyDown:this.onInputKeyDown}))},t}(a.a.Component);t.a=O},188:function(e,t,n){"use strict";var r=n(0),a=Object(r.createContext)({});t.a=a},194:function(e,t,n){"use strict";var r=n(29),a=n(8),o=n(5),i=n(10),c=n(0),s=n(168),u=n(52),l=n(184),d=n(182),p=n(188),j=n(1);t.a=function(e){var t=e.tagsInput,n=Object(c.useContext)(p.a).setTags,b=Object(c.useState)({}),h=Object(i.a)(b,2),f=h[0],v=h[1],O=Object(c.useState)({}),g=Object(i.a)(O,2),y=g[0],m=g[1],x=function(){var e=f.genre,t={};return void 0!==e?Object(d.c)(e)&&(t.genre="Genre is required!"):t.title="Genre is required!",t};return Object(j.jsxs)(s.a,{onSubmit:function(e){e.preventDefault();var a=x();n([].concat(Object(r.a)(t),[f.genre])),Object.keys(a).length>0&&m(a)},children:[Object(j.jsx)(l.a,{tags:t,onChange:n,readOnly:!1,placeholder:"Genres will vizualize here"}),Object(j.jsx)(s.a.Control,{placeholder:"Enter genre",style:{marginTop:"5%"},onChange:function(e){return t="genre",n=e.target.value,v(Object(o.a)(Object(o.a)({},f),{},Object(a.a)({},t,n))),void(y[t]&&m(Object(o.a)(Object(o.a)({},y),{},Object(a.a)({},t,null))));var t,n},isInvalid:!!y.genre}),Object(j.jsx)(s.a.Control.Feedback,{type:"invalid",children:y.genre}),Object(j.jsx)(u.a,{type:"submit",style:{marginTop:"5%"},children:"Add genre"})]})}},195:function(e,t,n){"use strict";var r=n(10),a=n(0);t.a=function(){var e=function(){return window.innerWidth<767.98},t=Object(a.useState)(e()),n=Object(r.a)(t,2),o=n[0],i=n[1];return Object(a.useEffect)((function(){var t=function(){i(e)};return window.addEventListener("resize",t),window.addEventListener("orientationchange",t),window.addEventListener("load",t),window.addEventListener("reload",t),function(){window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t),window.removeEventListener("load",t),window.removeEventListener("reload",t)}}),[]),o}},217:function(e,t,n){"use strict";n.r(t);var r=n(8),a=n(5),o=n(10),i=n(0),c=n(168),s=n(52),u=n(190),l=n(189),d=n(184),p=n(194),j=n(188),b=n(195),h=n(182),f=n(96),v=n(179),O=n(1);t.default=Object(v.a)((function(){var e=Object(i.useState)({}),t=Object(o.a)(e,2),n=t[0],v=t[1],g=Object(i.useState)(!1),y=Object(o.a)(g,2),m=y[0],x=y[1],w=Object(i.useState)({}),C=Object(o.a)(w,2),_=C[0],k=C[1],T=Object(i.useState)([]),L=Object(o.a)(T,2),E=L[0],R=L[1],S=Object(i.useState)(null),I=Object(o.a)(S,2),D=I[0],B=I[1],P=Object(i.useState)(!1),F=Object(o.a)(P,2),G=F[0],q=F[1],A=Object(b.a)(),N=function(e,t){v(Object(a.a)(Object(a.a)({},n),{},Object(r.a)({},e,t))),_[e]&&k(Object(a.a)(Object(a.a)({},_),{},Object(r.a)({},e,null)))},V=function(){var e=n.title,t=n.author,r=n.description,a=(n.series,n.seriesRow,n.publisher),o=n.year,i={};return void 0!==e?Object(h.c)(e)&&(i.title="Title is required!"):i.title="Title is required!",void 0!==t?Object(h.c)(t)&&(i.author="Author is required!"):i.author="Author is required!",null===D&&(i.img="Image is required!"),void 0!==r?Object(h.c)(r)&&(i.description="Description is required!"):i.description="Description is required!",void 0!==o?o<1950&&(i.year="Minimal value is 1950!"):i.year="Year is required!",void 0!==a?Object(h.c)(a)&&(i.publisher="Publisher is required!"):i.publisher="Publisher is required!",0===E.length&&(i.genre="There must be at least one genre!"),i};return Object(O.jsxs)(j.a.Provider,{value:{setTags:R},children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{className:"my-4 font-weight-bold .display-4",children:"Add Book"}),Object(O.jsxs)(c.a,{children:[Object(O.jsxs)(l.a,{children:[Object(O.jsxs)(c.a.Group,{style:{width:"50%",float:"left"},children:[Object(O.jsx)(c.a.Label,{children:"Title*"}),Object(O.jsx)(c.a.Control,{onChange:function(e){return N("title",e.target.value)},placeholder:"Title",isInvalid:!!_.title,defaultValue:String("")}),Object(O.jsx)(c.a.Control.Feedback,{type:"invalid",children:_.title})]}),Object(O.jsxs)(c.a.Group,{style:{width:"50%",float:"left"},children:[Object(O.jsx)(c.a.Label,{children:"Author*"}),Object(O.jsx)(c.a.Control,{onChange:function(e){return N("author",e.target.value)},placeholder:"Author",isInvalid:!!_.author}),Object(O.jsx)(c.a.Control.Feedback,{type:"invalid",children:_.author})]})]}),Object(O.jsxs)(c.a.Group,{style:{marginTop:"5%",width:"50%",marginLeft:"25%"},children:[Object(O.jsx)(c.a.Label,{children:"Image*"}),Object(O.jsx)(c.a.Control,{type:"file",onChange:function(e){return B(e.target.files[0])},isInvalid:!!_.img}),Object(O.jsx)(c.a.Control.Feedback,{type:"invalid",children:_.img})]}),Object(O.jsxs)(c.a.Group,{style:{marginTop:"5%"},children:[Object(O.jsx)(c.a.Label,{children:"Description*"}),Object(O.jsx)(c.a.Control,{as:"textarea",onChange:function(e){return N("description",e.target.value)},isInvalid:!!_.description}),Object(O.jsx)(c.a.Control.Feedback,{type:"invalid",children:_.description})]})]}),Object(O.jsxs)("div",{style:{marginTop:"5%",width:"50%",marginLeft:"25%"},children:[Object(O.jsx)(c.a.Label,{children:"Genres*"}),A?null:Object(O.jsx)(d.a,{tags:E,onChange:function(e){return R(e)},placeholder:"Enter genre and press enter"}),A?Object(O.jsx)(p.a,{tagsInput:E}):null,_.genre?Object(O.jsx)("div",{className:"invalid-feedback",children:_.genre}):null]}),Object(O.jsxs)(c.a,{onSubmit:function(e){e.preventDefault();var t=V();n.genres=E,Object.keys(t).length>0?k(t):(q(!0),Object(f.l)(n).then((function(e){e&&(q(!1),x(!0))})),Object(f.c)(n,D).then((function(e){null!==e&&(q(!1),window.location.pathname="/details/"+n._id)})))},children:[Object(O.jsxs)(l.a,{style:{marginTop:"5%"},children:[Object(O.jsxs)(c.a.Group,{style:{width:"50%",float:"left"},children:[Object(O.jsx)(c.a.Label,{children:"Series"}),Object(O.jsx)(c.a.Control,{onChange:function(e){return N("series",e.target.value)},placeholder:"Series - optional"})]}),Object(O.jsxs)(c.a.Group,{style:{width:"50%",float:"left"},children:[Object(O.jsx)(c.a.Label,{children:"Series Number"}),Object(O.jsx)(c.a.Control,{onChange:function(e){return N("seriesRow",e.target.value)},placeholder:"Series Number - optional",type:"number"})]})]}),Object(O.jsxs)(l.a,{style:{marginTop:"5%"},children:[Object(O.jsxs)(c.a.Group,{style:{width:"50%",float:"left"},children:[Object(O.jsx)(c.a.Label,{children:"Year of Publishing*"}),Object(O.jsx)(c.a.Control,{onChange:function(e){return N("year",e.target.value)},placeholder:"Year of Publishing",isInvalid:!!_.year,type:"number",min:"1950"}),Object(O.jsx)(c.a.Control.Feedback,{type:"invalid",children:_.year})]}),Object(O.jsxs)(c.a.Group,{style:{width:"50%",float:"left"},children:[Object(O.jsx)(c.a.Label,{children:"Publisher*"}),Object(O.jsx)(c.a.Control,{onChange:function(e){return N("publisher",e.target.value)},placeholder:"Publisher",isInvalid:!!_.publisher}),Object(O.jsx)(c.a.Control.Feedback,{type:"invalid",children:_.publisher})]})]}),Object(O.jsxs)(l.a,{style:{marginTop:"5%"},children:[Object(O.jsxs)(c.a.Group,{style:{width:"50%",float:"left"},children:[Object(O.jsx)(c.a.Label,{children:"You can read the book online here: "}),Object(O.jsx)(c.a.Control,{onChange:function(e){return N("onlineLink",e.target.value)},placeholder:"Link to read online"})]}),Object(O.jsxs)(c.a.Group,{style:{width:"50%",float:"left"},children:[Object(O.jsx)(c.a.Label,{children:"You can download the book here: "}),Object(O.jsx)(c.a.Control,{onChange:function(e){return N("downloadLink",e.target.value)},placeholder:"Link to download"})]})]}),Object(O.jsxs)(c.a.Group,{style:{marginTop:"5%"},children:[Object(O.jsx)(c.a.Label,{children:"You can buy the book here: "}),Object(O.jsx)(c.a.Control,{onChange:function(e){return N("buyLink",e.target.value)},placeholder:"Link to buy"})]}),Object(O.jsx)(s.a,{type:"submit",variant:"success",style:{marginTop:"5%"},children:"Add Book"})]})]}),Object(O.jsx)(u.a,{show:G,backdrop:"static",keyboard:!1,children:Object(O.jsx)(u.a.Body,{children:"Book is being added..."})}),Object(O.jsxs)(u.a,{show:m,onHide:x,centered:!0,children:[Object(O.jsx)(u.a.Header,{closeButton:!0,children:Object(O.jsx)(u.a.Title,{children:"Error"})}),Object(O.jsx)(u.a.Body,{children:"Book already exists!"})]})]})}))}}]);
//# sourceMappingURL=23.1e136342.chunk.js.map