{"version":3,"sources":["components/books/utils/BooksList/BookItem/BookItem.module.css","components/books/utils/BooksList/BooksList.module.css","hooks/usePaginate.js","components/books/utils/Pagination/paginate.js","components/books/utils/Pagination/Pagination.js","components/books/utils/BooksList/BookItem/BookItem.js","components/books/utils/BooksList/BooksList.js","components/util/splitArray.js","components/books/catalog-components/newest-books/NewestBooks.js"],"names":["module","exports","usePaginate","books","useState","currentPage","setCurrentPage","paginationData","items","pageNumber","pageSize","startIndex","_","slice","take","value","paginate","totalCount","length","data","getPageData","handlePageChange","page","Pagination","props","itemsCount","onPageChange","pageCount","Math","ceil","pages","range","className","style","marginTop","map","href","onClick","BookItem","book","url","setUrl","isLoading","setIsLoading","avatarUrl","setAvatarUrl","date","dayjs","createdOn","format","useEffect","getImageUrl","_id","then","x","getAvatar","creator","description","Card","styles","Image","src","alt","marginLeft","Body","Img","width","height","Title","textDecoration","fontSize","to","color","title","Text","likes","wordBreak","Link","as","BooksList","splittedData","arr","len","chunks","i","n","push","splitArray","NewestBooks","newest","setNewest","isFetch","setIsFetch","getNewestBooks"],"mappings":"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","file":"static/js/20.017436d5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"BookItem_card__3WB3x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"books-row\":\"BooksList_books-row__2-grT\"};","import { useState } from \"react\"\r\nimport { paginate } from \"../components/books/utils/Pagination/paginate\"\r\n\r\nexport default function usePaginate(books) {\r\n    const [currentPage, setCurrentPage] = useState(1)\r\n    const pageSize = 9\r\n\r\n    const handlePageChange = page => {\r\n        setCurrentPage(page)\r\n    }\r\n\r\n    const getPageData = () => {\r\n\r\n        const paginationData = paginate(books, currentPage, pageSize)\r\n        return { totalCount: books.length, data: paginationData }\r\n    }\r\n\r\n    const { totalCount, data } = getPageData()\r\n    return { data, totalCount, pageSize, currentPage, handlePageChange }\r\n\r\n}","import _ from 'lodash'\r\n\r\nexport function paginate(items, pageNumber, pageSize){\r\n   const startIndex = (pageNumber - 1) * pageSize\r\n\r\n   return _(items)\r\n            .slice(startIndex)\r\n            .take(pageSize)\r\n            .value()\r\n}","import React from 'react'\r\nimport _ from 'lodash'\r\nimport './pagination.css'\r\n\r\nconst Pagination = (props) => {\r\n\r\n    const { itemsCount, pageSize, currentPage, onPageChange } = props\r\n    const pageCount = Math.ceil(itemsCount / pageSize)\r\n    if (pageCount === 1) return null\r\n    const pages = _.range(1, pageCount + 1)\r\n\r\n    return (\r\n        <div className=\"pagination\" style={{ marginTop: \"5%\" }}>\r\n            {pages.map(page => (\r\n                <div href={null} key={page}\r\n                    onClick={() => onPageChange(page)}\r\n                    className={page === currentPage ? 'active' : 'page-item'}>\r\n                    {page}\r\n                </div>\r\n            ))}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Pagination","import { useEffect, useState } from 'react'\r\nimport Card from 'react-bootstrap/Card'\r\nimport Image from 'react-bootstrap/Image'\r\nimport * as dayjs from 'dayjs'\r\nimport { Link } from \"react-router-dom\"\r\nimport { getAvatar, getImageUrl } from '../../../../../services/image-service'\r\nimport styles from './BookItem.module.css'\r\n\r\nexport default function BookItem({ book }) {\r\n    const [url, setUrl] = useState('')\r\n    const [isLoading, setIsLoading] = useState(true)\r\n    const [avatarUrl, setAvatarUrl] = useState('')\r\n    const date = dayjs(book.createdOn).format('DD/MM/YYYY h:mm A')\r\n\r\n    useEffect(() => {\r\n        if (isLoading) {\r\n            getImageUrl(book._id).then(x => {\r\n                setUrl(x)\r\n            })\r\n            getAvatar(book.creator).then(x => {\r\n                setAvatarUrl(x)\r\n            })\r\n        }\r\n\r\n        if (avatarUrl === '') {\r\n            setAvatarUrl('https://media.istockphoto.com/illustrations/blank-man-profile-head-icon-placeholder-illustration-id1298261537?k=20&m=1298261537&s=612x612&w=0&h=8plXnK6Ur3LGqG9s-Xt2ZZfKk6bI0IbzDZrNH9tr9Ok=')\r\n        }\r\n\r\n        return () => {\r\n            setIsLoading(false)\r\n        }\r\n    }, [isLoading, book._id, book.creator, avatarUrl])\r\n\r\n\r\n    if (book.description.length > 255) {\r\n        book.description = book.description.slice(0, 256)\r\n        book.description += '...'\r\n    }\r\n\r\n    return <Card className={styles['card']}>\r\n        <Image src={avatarUrl} alt=\"No avatar\" className=\"avatar\" style={{ marginLeft: \"36%\", marginTop: \"5%\" }} />\r\n        <Card.Body>\r\n            <Card.Img src={url} style={{ width: '60%', height: \"40%\" }} alt=\"No image\" />\r\n            <Card.Title style={{ marginTop: \"5%\", textDecoration: \"underline\", fontSize: \"20px\" }}><Link to={`/details/${book._id}`} style={{ color: \"grey\" }}>{book.title}</Link></Card.Title>\r\n            <Card.Text style={{ fontSize: \"12px\" }}>Book added on {date} <Link to={`/user/${book.creator}`} style={{ fontSize: \"12px\", color: \"black\" }}> by {book.creator}</Link></Card.Text>\r\n            {book.likes\r\n                ? <Card.Text style={{ fontSize: \"12px\" }}>{book.likes.length} like{book.likes.length > 1 ? 's' : ''}</Card.Text>\r\n                : <Card.Text style={{ fontSize: \"12px\" }}>0 likes</Card.Text>\r\n            }\r\n            <Card.Text style={{ wordBreak: 'break-all', fontSize: \"15px\" }}>\r\n                {book.description}\r\n            </Card.Text>\r\n            <Card.Link as={Link} to={`/details/${book._id}`} style={{ color: 'grey', textDecoration: 'none', fontSize: \"15px\" }}>See more...</Card.Link>\r\n        </Card.Body>\r\n    </Card>\r\n}","import usePaginate from \"../../../../hooks/usePaginate\"\r\nimport Pagination from \"../Pagination/Pagination\"\r\nimport BookItem from \"./BookItem/BookItem\"\r\nimport splitArray from \"../../../util/splitArray\"\r\nimport styles from './BooksList.module.css'\r\n\r\n\r\nexport default function BooksList({ books }) {\r\n    const { data, totalCount, pageSize, currentPage, handlePageChange } = usePaginate(books ? books : [])\r\n    const splittedData = splitArray(data, 3)\r\n\r\n    return <>\r\n        {splittedData.map(x => {\r\n            return <div className={styles['books-row']} data-testid=\"booksrow\" key={x[0]._id}>\r\n                {x.map(book => {\r\n                    return <BookItem book={book} key={book._id} />\r\n                })\r\n                }\r\n            </div>\r\n        })}\r\n        <Pagination\r\n            itemsCount={totalCount}\r\n            pageSize={pageSize}\r\n            currentPage={currentPage}\r\n            onPageChange={handlePageChange} />\r\n    </>\r\n}","export default function splitArray(arr, len) {\r\n    var chunks = [], i = 0, n = arr.length;\r\n    while (i < n) {\r\n        chunks.push(arr.slice(i, i += len));\r\n    }\r\n    return chunks;\r\n}","import { useEffect, useState } from \"react\"\r\n\r\nimport BooksList from '../../utils/BooksList/BooksList'\r\nimport { getNewestBooks } from '../../../../services/books-service'\r\n\r\nexport default function NewestBooks() {\r\n    const [newest, setNewest] = useState([])\r\n    const [isFetch, setIsFetch] = useState(true)\r\n\r\n    useEffect(() => {\r\n        if (isFetch) {\r\n            getNewestBooks().then(x => {\r\n                setNewest(x)\r\n            })\r\n        }\r\n        return () => {\r\n            setIsFetch(false)\r\n        }\r\n    })\r\n\r\n    return !isFetch\r\n        ? newest && newest.length > 0\r\n            ? <>\r\n                <h1 style={{ marginTop: \"3%\" }}>Newest books</h1>\r\n                <BooksList books={newest} />\r\n\r\n            </>\r\n            : <p>No books</p>\r\n        : <p>Loading books...</p>\r\n}"],"sourceRoot":""}